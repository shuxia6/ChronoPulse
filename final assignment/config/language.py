# å¤šè¯­è¨€å­—å…¸
LANG = {
    "zh": {
        "welcome": "=== å¿ƒç†å¥åº·å°åŠ©æ‰‹ ===",
        "menu": "è¯·é€‰æ‹©åŠŸèƒ½: 1=è®°å½•å¿ƒæƒ…, 2=æŸ¥çœ‹å½“å¤©è¶‹åŠ¿, 3=æ¯å‘¨æŠ¥å‘Š, 4=æ•°æ®ç®¡ç†, 5=æŸ¥çœ‹å¿ƒæƒ…æ—¥å†, 6=æŸ¥çœ‹æ€»è¶‹åŠ¿, 7=å¯¼å‡ºæ—¥æŠ¥, 8=åˆ‡æ¢è¯­è¨€/Change language, 0=é€€å‡º: ",
        "choose_mood": "è¯·è¾“å…¥ç°åœ¨çš„å¿ƒæƒ… (1=å¼€å¿ƒ, 2=ä¸€èˆ¬, 3=å‹åŠ›å¤§, æˆ–ç›´æ¥è¾“å…¥å¿ƒæƒ…): ",
        "invalid": "è¾“å…¥æ— æ•ˆï¼Œè¯·è¾“å…¥ 1, 2, 3 æˆ–æœ‰æ•ˆçš„å¿ƒæƒ…åç§°",
        "not_number": "è¯·è¾“å…¥æ•°å­—ï¼",
        "saved": "å·²ä¿å­˜",
        "no_data": "è¿˜æ²¡æœ‰å¿ƒæƒ…è®°å½•ï¼Œå…ˆæ¥æ·»åŠ ä¸€æ¡å§ï¼",
        "avg": "å¹³å‡å¿ƒæƒ…æŒ‡æ•°ï¼š{:.2f} (èŒƒå›´ 1=å·®, 3=å¥½)",
        "suggest_happy": "å°å»ºè®®ï¼šç»§ç»­ä¿æŒè¿™ç§å¥½çŠ¶æ€ï¼ğŸŒ",
        "suggest_ok": "å°å»ºè®®ï¼šæ‰¾ç‚¹è®©ä½ å¼€å¿ƒçš„å°äº‹åšå§ï¼ğŸŒ±",
        "suggest_stress": "å°å»ºè®®ï¼šæ³¨æ„ä¼‘æ¯ï¼Œå‡ºå»èµ°èµ°æˆ–è¿åŠ¨ä¸€ä¸‹ã€‚ğŸ˜Š",
        "choose_lang": "è¯·é€‰æ‹©è¯­è¨€ / Choose language (1=ä¸­æ–‡/Chinese, 2=è‹±æ–‡/English): ",
        "plot_title": "å¿ƒæƒ…è¶‹åŠ¿å›¾",
        "plot_xlabel": "æ—¶é—´",
        "plot_ylabel": "å¿ƒæƒ…æŒ‡æ•° (1=å·®, 3=å¥½)",
        "lang_changed": "è¯­è¨€å·²åˆ‡æ¢ä¸ºä¸­æ–‡ / Language changed to Chinese",
        "data_management": "æ•°æ®ç®¡ç†é€‰é¡¹:",
        "view_records": "1. æŸ¥çœ‹æœ€è¿‘10æ¡è®°å½•",
        "delete_record": "2. åˆ é™¤æœ€æ–°è®°å½•",
        "export_data": "3. å¯¼å‡ºæ•°æ® (CSV/JSON)",
        "search_notes": "4. æŒ‰å…³é”®è¯æœç´¢å¤‡æ³¨",
        "choose_option": "è¯·é€‰æ‹©: ",
        "record_deleted": "å·²åˆ é™¤: {}",
        "no_data_to_delete": "æ²¡æœ‰æ•°æ®å¯åˆ é™¤",
        "weekly_report": "=== æ¯å‘¨å¿ƒæƒ…æŠ¥å‘Š ===",
        "record_count": "è®°å½•æ•°é‡: {}",
        "avg_mood_score": "å¹³å‡å¿ƒæƒ…åˆ†æ•°: {:.2f}",
        "daily_avg_mood": "æ¯æ—¥å¹³å‡å¿ƒæƒ…:",
        "week_summary_good": "ğŸ‘ æœ¬å‘¨æ•´ä½“å¿ƒæƒ…ä¸é”™ï¼Œç»§ç»­ä¿æŒ!",
        "week_summary_normal": "ğŸ˜ æœ¬å‘¨å¿ƒæƒ…ä¸€èˆ¬ï¼Œå¯ä»¥å°è¯•åšäº›è®©è‡ªå·±å¼€å¿ƒçš„äº‹",
        "week_summary_bad": "ğŸ‘ æœ¬å‘¨å¿ƒæƒ…è¾ƒå·®ï¼Œå»ºè®®å¤šä¼‘æ¯æˆ–å¯»æ±‚å¸®åŠ©",
        "no_records_week": "æœ€è¿‘7å¤©æ²¡æœ‰å¿ƒæƒ…è®°å½•",
        "exit_message": "æ„Ÿè°¢ä½¿ç”¨å¿ƒç†å¥åº·å°åŠ©æ‰‹ï¼",
        "invalid_input": "âš ï¸ æ— æ•ˆè¾“å…¥ï¼Œè¯·é‡æ–°é€‰æ‹©",
        "export_data_success": "æ•°æ®å·²å¯¼å‡ºåˆ°",
        "choose_export_format": "é€‰æ‹©å¯¼å‡ºæ ¼å¼ / Choose export format: 1=CSV, 2=JSON",
        "pie_chart_saved": "é¥¼å›¾å·²ä¿å­˜ä¸º",
        "calendar_saved": "æ—¥å†å·²ä¿å­˜ä¸º",
        "enter_year_month": "è¯·è¾“å…¥å¹´æœˆ (YYYY-MM): ",
        "enter_date": "è¯·è¾“å…¥æ—¥æœŸ (YYYY-MM-DD): ",
        "report_saved": "æŠ¥å‘Šå·²å¯¼å‡ºåˆ°",
        "score_label": "åˆ†æ•°",
        "enter_note": "è¯·è¾“å…¥å¤‡æ³¨ï¼ˆå¯é€‰ï¼ŒæŒ‰å›è½¦è·³è¿‡ï¼‰",
        "note_label": "å¤‡æ³¨",
        "no_note": "æ— å¤‡æ³¨",
        "best_mood": "æœ€ä½³å¿ƒæƒ…æ—¶åˆ»: {} (åˆ†æ•°: {})",
        "worst_mood": "æœ€å·®å¿ƒæƒ…æ—¶åˆ»: {} (åˆ†æ•°: {})",
        "trend_line": "è¶‹åŠ¿çº¿",
        "plot_best": "æœ€ä½³",
        "plot_worst": "æœ€å·®",
        "plot_saved": "å›¾è¡¨å·²ä¿å­˜ä¸º {}",
        "enter_keyword": "è¯·è¾“å…¥æœç´¢å…³é”®è¯: ",
        "no_keyword_found": "æ²¡æœ‰æ‰¾åˆ°åŒ…å« '{}' çš„å¤‡æ³¨ã€‚",
        "found_records_for": "æ‰¾åˆ° {} æ¡åŒ…å« '{}' çš„è®°å½•:"
    },
    "en": {
        "welcome": "=== Mental Health Assistant ===",
        "menu": "Choose function: 1=Record mood, 2=View today trend, 3=Weekly report, 4=Data management, 5=View Mood Calendar, 6=View Overall Trend, 7=Export Daily Report, 8=Change language/åˆ‡æ¢è¯­è¨€, 0=Exit: ",
        "choose_mood": "Enter your current mood (1=Happy, 2=Neutral, 3=Stressed, or type the mood): ",
        "invalid": "Invalid input, please enter 1, 2, 3, or a valid mood name.",
        "not_number": "Please enter a number!",
        "saved": "Saved",
        "no_data": "No mood records yet, please add one first!",
        "avg": "Average mood score: {:.2f} (Range: 1=Bad, 3=Good)",
        "suggest_happy": "Tip: Great job, keep this positive energy! ğŸŒ",
        "suggest_ok": "Tip: Find something fun to brighten your day! ğŸŒ±",
        "suggest_stress": "Tip: Take a break, go for a walk or exercise. ğŸ˜Š",
        "choose_lang": "Choose language / è¯·é€‰æ‹©è¯­è¨€ (1=Chinese/ä¸­æ–‡, 2=English/è‹±æ–‡): ",
        "plot_title": "Mood Trend",
        "plot_xlabel": "Time",
        "plot_ylabel": "Mood Score (1=Bad, 3=Good)",
        "lang_changed": "Language changed to English / è¯­è¨€å·²åˆ‡æ¢ä¸ºè‹±æ–‡",
        "data_management": "Data management options:",
        "view_records": "1. View last 10 records",
        "delete_record": "2. Delete latest record",
        "export_data": "3. Export data (CSV/JSON)",
        "search_notes": "4. Search notes by keyword",
        "choose_option": "Please choose: ",
        "record_deleted": "Deleted: {}",
        "no_data_to_delete": "No data to delete",
        "weekly_report": "=== Weekly Mood Report ===",
        "record_count": "Record count: {}",
        "avg_mood_score": "Average mood score: {:.2f}",
        "daily_avg_mood": "Daily average mood:",
        "week_summary_good": "ğŸ‘ Good mood this week, keep it up!",
        "week_summary_normal": "ğŸ˜ Average mood this week, try to do something fun",
        "week_summary_bad": "ğŸ‘ Low mood this week, consider resting or seeking help",
        "no_records_week": "No mood records in the last 7 days",
        "exit_message": "Thank you for using Mental Health Assistant!",
        "invalid_input": "âš ï¸ Invalid input, please try again",
        "export_data_success": "Data exported to",
        "choose_export_format": "Choose export format / é€‰æ‹©å¯¼å‡ºæ ¼å¼: 1=CSV, 2=JSON",
        "pie_chart_saved": "Pie chart saved as",
        "calendar_saved": "Calendar saved as",
        "enter_year_month": "Enter year-month (YYYY-MM): ",
        "enter_date": "Enter date (YYYY-MM-DD): ",
        "report_saved": "Report exported to",
        "score_label": "Score",
        "enter_note": "Enter note (optional, press Enter to skip): ",
        "note_label": "Note",
        "no_note": "No note",
        "best_mood": "Best mood moment: {} (Score: {})",
        "worst_mood": "Worst mood moment: {} (Score: {})",
        "trend_line": "Trend Line",
        "plot_best": "Best",
        "plot_worst": "Worst",
        "plot_saved": "Chart saved as {}",
        "enter_keyword": "Enter keyword to search: ",
        "no_keyword_found": "No records found containing '{}'.",
        "found_records_for": "Found {} record(s) containing '{}':"
    }
}


def get_language():
    """è¯»å–æˆ–è®¾ç½®è¯­è¨€"""
    from config.settings import CONFIG_FILE
    import os
    if os.path.exists(CONFIG_FILE):
        with open(CONFIG_FILE, "r", encoding="utf-8") as f:
            lang = f.read().strip()
            if lang in LANG:
                return lang
    return "zh"  # é»˜è®¤ä¸­æ–‡


def change_language():
    """åˆ‡æ¢è¯­è¨€å¹¶ä¿å­˜åˆ°é…ç½®æ–‡ä»¶"""
    from config.settings import CONFIG_FILE
    while True:
        choice = input(LANG[get_language()]["choose_lang"]).strip()
        if choice == "1":
            lang = "zh"
            break
        elif choice == "2":
            lang = "en"
            break
        else:
            current_lang = get_language()
            print("è¾“å…¥æ— æ•ˆï¼Œè¯·è¾“å…¥ 1 æˆ– 2 / Invalid input, please enter 1 or 2.")
    with open(CONFIG_FILE, "w", encoding="utf-8") as f:
        f.write(lang)
    print(LANG[lang]["lang_changed"])
    return lang